<section>
    <div id="trackname" class="marquee">
        <button title="save playlist" onclick="save_playlist()">+</button>
        <div class="marquee-text">
            <div>{{{ trackname }}}</div>
            <div>{{{ trackname }}}</div>
        </div>
        <button title="save playlist" onclick="save_playlist()">+</button>
    </div>
    <div class="heading">
        <h1>{{display_name}}</h1><span>:{{username}}</span>
        <a href="https://open.spotify.com/" target="_blank">
            <img id="logo" src="public/assets/Spotify_Logo_RGB_White.png" alt="spotify logo" />
        </a>
    </div>
    <section class="curr-lists">
        <h2>your current tops</h2>
        <div>
            {{> top-list type='artists' top=artists }}
            {{> top-list type='tracks' top=tracks }}
            {{> top-list type='genres' top=genres }}
        </div>
    </section>
    <section id="chart">
        <h2>chart</h2>
        {{> chart-form ctx=form }}
        <section class="chartarea">
            {{{chart}}}
        </section>
    </section>
</section>
<script>
    let d=document,q=z=>d.querySelector(z),a=z=>d.querySelectorAll(z),l=z=>z.classList,w='selected-tr-btn',m='selected-tr',c=e=>{let t=e.value,k=l(e.parentNode.parentNode).item(1),o=a(`.${k}>.top-list:not(.${t})`),f=a(`.${k} .tab`);o.forEach(p=>l(p).remove(m));f.forEach(g=>l(g).remove(w));l(e).add(w);l(q(`.${k} .${t}`)).add(m)},z='selected-cl',y='.empty-legend',h=i=>{let v=a(`.cl${i}`),e=v[Math.floor(v.length/2)],x=q(y);v.forEach(u=>l(u).add(z));if(x){x.innerHTML=e.dataset.key;let b=z=>z.offsetLeft,r=e.parentNode,p=b(r)+r.offsetWidth-x.offsetWidth;x.style.cssText=`top:${e.offsetTop}px;left:${p<b(e)?p:b(e)}px;opacity:1`} },u=i=>{a(`.cl${i}`).forEach(j=>l(j).remove(z));x=q(y);x.style.opacity=x.innerHTML=''}
</script>
<script src="public/js/event-handling.js" defer></script>

<section>
    <div id="trackname" class="marquee">
        <div class="marquee-text">
            <div>{{{ trackname }}}</div>
            <div>{{{ trackname }}}</div>
        </div>
    </div>
    <div class="heading">
        <h1>{{display_name}}</h1><span>:{{username}}</span>
        <a href="https://open.spotify.com/" target="_blank">
            <img id="logo" src="public/assets/Spotify_Logo_RGB_White.png" alt="spotify logo" />
        </a>
    </div>
    <section class="curr-lists">
        <h2>your current tops</h2>
        <div>
            {{> top-list type='artists' top=artists }}
            {{> top-list type='tracks' top=tracks }}
            {{> top-list type='genres' top=genres }}
        </div>
    </section>
    <section id="#chart">
        <h2>chart</h2>
        {{> chart-form ctx=form }}
        <section class="chartarea">
            {{{chart}}}
        </section>
    </section>
</section>
<script>
    let d=document,q=z=>d.querySelector(z),a=z=>d.querySelectorAll(z),s="{{scroll_to}}",c=e=>{let t=e.value,k=e.parentElement.parentElement.classList.item(1),o=a(`.${k} > .top-list:not(.${t})`),f=a(`.${k} > .top-head button`);o.forEach(p=>p.classList.remove('selected-tr'));f.forEach(g=>g.classList.remove('selected-tr-btn'));e.classList.add('selected-tr-btn');d.querySelector(`.${k} .${t}`).classList.add('selected-tr')},h=i=>{let v=a(`.cl${i}`),e=v[Math.floor(v.length/2)],l=q('.empty-legend');v.forEach(u=>u.classList.add('selected-cl'));if(l){let p=e.parentElement.offsetLeft+ e.parentElement.offsetWidth-50;l.innerHTML=e.dataset.key;Object.entries({'--top':e.offsetTop+'px','--right':(p<e.offsetLeft?p:e.offsetLeft)+'px','--key':e.dataset.key}).forEach(x=>l.style.setProperty(x[0],x[1]));} },u=i=>{a(`.cl${i}`).forEach(l=>l.classList.remove('selected-cl'));q('.empty-legend').innerHTML=''};if(s!='')d.getElementById(s).scrollIntoView(true);
</script>
